# Lableb cloud javascript SDK 

Easily integrate with Lableb to add powerful search capabilities in-website/in-app :
 - search (instant results & highly configurable)
 - autocomplete (super fast & understand what you want)
 - recommend (direct links between your data can be fetching using smart recommendation)
 - index new data(documents) (indexing data make it available in search results)
 - update existing data (documents get updated all the times...no problem, you can update it easily)
 - delete documents(easily remove from search results)



# SDK V2 features
 - built with typescript to power your DX
 - universal module build (can work in any environment)
 - use different http client for different environment(browser/node)
 - use the new Lableb RESTful API
 - Promise based async code




# Installation

### npm

```sh
npm install @lableb/javascript-sdk
```


### yarn

```sh
yarn add @lableb/javascript-sdk
```


### Browser (~ 32KB)
```html
<script src="https://unpkg.com/@lableb/javascript-sdk@2.0.1-beta/dist/LablebSDK.min.js"></script>
```




# Importing the SDK

### Node.js
```js
const LablebSDK = require('@lableb/javascript-sdk');
```

### ESM Modules
```js
import * as LablebSDK from'@lableb/javascript-sdk';
```

### Browser
```js
var LablebSDK = window.LablebSDK;
```






# Initializing the SDK

```js
let client = LablebSDK.init({
    
    projectName: '<PROJECT_NAME>',
    collectionName: '<COLLECTION_NAME>',

    // used for search, autocomplete, recommend, feedback
    searchToken: '<SEARCH_TOKEN>',

    // only needed in server in case you need to index/delete documents
    indexToken: '<INDEX_TOKEN>', 
    
    searchHandler: '<SEARCH_HANDLER>',
    autoCompleteHandler: '<AUTOCOMPLETE_HANDLER>',
    recommendHandler: '<RECOMMEND_HANDLER>',
});
```




## Options 
| Options               | Default           | Descriptions                                      |
| --------------------- |:-----------------:|:-------------------------------------------------:|
| projectName           | -                 | project name                                      |
| collectionName        | "posts"           | collection name                                   |
| searchToken           | -                 | used in search, autocomplete, recommend           |
| indexToken            | -                 | used to index, or delete documents                |
| searchHandler         | "default"         | configured handler used in search queries         |
| autoCompleteHandler   | "suggest"         | configured handler used in autocomplete queries   |
| recommendHandler      | "recommend"       | configured handler used in recommendation         |



## To get your tokens and other config options
 - login to [Lableb Dashboard](https://dashboard.lableb.com)
 - open API Keys tab
 - generate new tokens(or use the existing ones)
 - copy project name as it is(in small letters)



### SDK offers:
 - `indexing` documents function (only works in server environment)
 - `delete` document function (only works in server environment)
 - `search` function that enable you to send queries to Lableb API
 - `autocomplete` function that help your user predicting what they are searching for
 - `recommend` function help you get similar document given an existing document
 - `feedback` function for `search` & `autocomplete` & `recommend` which is highly important to you to track your users search choices & recommendation in Lableb dashboard



# Examples


## Index new documents

#### Using Promises
```js
    client.indexDocuments([
        {
            id: 1,
            title: "Finish interior design project",
            tags: ["research", "design"],
            url: "https://www.my-website.com/all-tasks/finish-interior-design-project",
        },
        {
            id: 2,
            title: "Update building process time",
            tags: ["performance"],
            url: "https://www.my-website.com/all-tasks/build-process-time",
        },
    ])
    .then(response => {
        //...
    })
```


#### Using ES7 async/await
```js

async function indexMyDocuments(){

    const response = await client.indexDocuments([
        {
            id: 1,
            title: "Finish interior design project",
            tags: ["research", "design"],
            url: "https://www.my-website.com/all-tasks/finish-interior-design-project",
        },
        {
            id: 2,
            title: "Update building process time",
            tags: ["performance"],
            url: "https://www.my-website.com/all-tasks/build-process-time",
        },
    ]);

}
```




## Delete existing document
```js
const response = await client.delete({ documentId: 4 });
```



## Search & Feedback
```js
    const response = await client.search({
        query: 'building',
        itemURLSchema: 'https://www.my-website.com/all-tasks/all-items/{id}'
    });

    /**
    * when your users see the results, you register an event like onclick, that will 
    *  a feedback request to Lableb in case the user clicked on it.
    * 
    * here's an example in case the first item get clicked by the user
    */
    client.searchFeedbackFromURL(response.data.response.results[0].feedbackUrl);
```


## Autocomplete & Feedback
```js
    const response: any = await client.autocomplete({
        query: 'building',
    });
    
    /**
    * when your users see the results, you register an event like onclick, that will 
    *  a feedback request to Lableb in case the user clicked on it.
    * 
    * here's an example in case the first item get clicked by the user
    */
    client.autocompleteFeedbackFromURL(response.data.response.results[0].feedbackUrl);
```


## Recommend & Feedback
```js
    let response = await client.recommend({
        id: 2,
        itemURLSchema: 'https://www.my-website.com/all-tasks/all-items/{id}',
    });

    /**
    * when your users see the results, you register an event like onclick, that will 
    *  a feedback request to Lableb in case the user clicked on it.
    * 
    * here's an example in case the first item get clicked by the user
    */
    client.recommendFeedback(response.data.response.results[0].feedbackUrl);
```


# Examples
You can read real code example in `/examples` folder, we have example for various libraries, frameworks, environments:
- Node.js
- Node.js with Typescript
- Pure html-css-js example
- Pure html-css-js with hands on DOM manipulation
- angular ( > 7.x.x)
- react
