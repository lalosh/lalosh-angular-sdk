import { isBrowser } from "../helpers";
import { URLDeleteOptions } from "../types/url";
import { LablebSDKContext } from "./index";


/**
 * Delete document at Lableb Cloud by id
 * 
 * @param {object} options 
 * @param {number} options.documentId 
 * 
 * @returns {Promise} - delete response
 */
export function deleteDocument(

    this: LablebSDKContext,

    options: URLDeleteOptions

) {
    /**
     * you cannot use the delete function when the build target is commonJs
     * and the sdk is used in react/angular application
     * 
     * we need to write the full function code here, because writing it in separate function
     * and calling it will have `this` bound to SDK context and not the global object
     */
    if (new Function("try { return this === window; } catch(e){ return false; }")()) {
        throw new Error('You cannot use delete function in browser');
    }

    return this.httpClient.delete({
        url: this.urlBuilder.deleteDocumentURL(options),
    });
}