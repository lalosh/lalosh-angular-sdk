import { LablebSDK } from "../../src/core";


let sdk = LablebSDK({
    collectionName: process.env.SDK_OPTIONS_COLLECTION_NAME || '',
    projectName: process.env.SDK_OPTIONS_PROJECT_NAME || '',
    autoCompleteHandler: process.env.SDK_OPTIONS_AUTO_COMPLETE_HANDLER || '',
    indexToken: process.env.SDK_OPTIONS_INDEX_TOKEN || '',
    recommendHandler: process.env.SDK_OPTIONS_RECOMMEND_HANDLER || '',
    searchHandler: process.env.SDK_OPTIONS_SEARCH_HANDLER || '',
    searchToken: process.env.SDK_OPTIONS_SEARCH_TOKEN || '',
});




describe('TEST SDK', () => {


    test('Test Recommend with feedback', async () => {

        let response: any = await sdk.recommend({
            id: 2,
            itemURLSchema: 'https://www.my-website.com/all-tasks/all-items/{id}',
            title: 'Update building process time',
            userId: 22,
            userIp: '222.222.111.222',
            userCountry: 'AF'
        });


        expect(response.found_documents).toBeGreaterThanOrEqual(0);

        if (response.results.length) {
            let feedBackResponse = await sdk.recommendFeedback(response.results[0].feedbackUrl);
        }
    });

});