const Sequencer = require('@jest/test-sequencer').default;

class CustomSequencer extends Sequencer {
    sort(tests) {

        // Test structure information
        // https://github.com/facebook/jest/blob/6b8b1404a1d9254e7d5d90a8934087a9c9899dab/packages/jest-runner/src/types.ts#L17-L21

        const copyTests = Array.from(tests);

        // console.log(copyTests)
        let urlTests = copyTests.filter(test => test.path.includes('/test/url/'));
        let sdkTests = copyTests.filter(test => test.path.includes('/test/sdk/'));
        let httpTests = copyTests.filter(test => test.path.includes('/test/http/'));

        let indexingTest = sdkTests.find(test => test.path.includes('/test/sdk/indexing'));
        let deleteTest = sdkTests.find(test => test.path.includes('/test/sdk/delete'));
        let searchTest = sdkTests.find(test => test.path.includes('/test/sdk/search'));
        let autocompleteTest = sdkTests.find(test => test.path.includes('/test/sdk/autocomplete'));
        let recommendTest = sdkTests.find(test => test.path.includes('/test/sdk/recommend'));
        

        return [
            indexingTest,
            ...urlTests,
            ...httpTests,
            searchTest,
            autocompleteTest,
            recommendTest,
            deleteTest
        ]

    }
}

module.exports = CustomSequencer;