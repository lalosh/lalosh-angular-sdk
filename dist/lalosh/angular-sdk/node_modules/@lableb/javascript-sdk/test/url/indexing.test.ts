import { URLBuilder } from "../../src/url";

describe('Test Generating Indexing URLs', () => {

    let options = {
        baseURL: 'https://www.example.com/api/v2',
        collectionName: 'posts',
        projectName: 'wptest',
        indexToken: '38937489374h3jhkahf978a6fhfu',
        searchToken: 'kajlfif8a678a78fh2224jh24fa23',
        searchHandler: 'default',
        autoCompleteHandler: 'suggest',
        recommendHandler: 'default',
    };
    let urlInstance = URLBuilder(options);;


    beforeAll(() => {
        urlInstance = URLBuilder(options);
    });
    




    test('Correctly generate index Documents URL', () => {

        let indexURL = urlInstance.indexDocumentURL();

        let rightAnswer = `${options.baseURL}/projects/${options.projectName}/collections/${options.collectionName}/documents?token=${options.indexToken}`

        expect(indexURL).toBe(rightAnswer);
    });



    test('Correctly generate update Documents URL', () => {

        let indexURL = urlInstance.indexDocumentURL();

        let rightAnswer = `${options.baseURL}/projects/${options.projectName}/collections/${options.collectionName}/documents?token=${options.indexToken}`

        expect(indexURL).toBe(rightAnswer);

    });
    
});